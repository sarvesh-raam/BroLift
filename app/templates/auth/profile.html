{% extends "base.html" %}
{% block title %}My Profile â€” BroLift{% endblock %}
{% block content %}
<div class="profile-page">
    <div class="profile-header">
        <div class="profile-avatar-big">{{ current_user.name[0].upper() }}</div>
        <div class="profile-info">
            <h1>{{ current_user.name }}</h1>
            <p>{{ current_user.email }}</p>
            <p class="profile-joined">Member since {{ current_user.created_at.strftime('%B %Y') }}</p>
        </div>
    </div>
    <div class="profile-body">
        <div class="profile-card">
            <h2>Edit Profile</h2>
            <form method="POST" class="auth-form">
                <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" name="name" value="{{ current_user.name }}" required>
                </div>
                <div class="form-group">
                    <label>SRM IST Email</label>
                    <input type="email" value="{{ current_user.email }}" disabled class="input-disabled">
                    <span class="form-hint">Email cannot be changed</span>
                </div>
                <div class="form-toggle-group">
                    <label class="toggle-label">
                        <input type="checkbox" id="has_car" name="has_car" onchange="toggleCarFields(this.checked)" {%
                            if current_user.has_car %}checked{% endif %}>
                        <span class="toggle-slider"></span>
                        <span class="toggle-text">I have a car and want to host rides</span>
                    </label>
                </div>
                <div id="car-fields" class="car-fields"
                    style="display: {% if current_user.has_car %}block{% else %}none{% endif %};">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="car_model">Car Model</label>
                            <input type="text" id="car_model" name="car_model"
                                value="{{ current_user.car_model or '' }}" placeholder="e.g. Honda City">
                        </div>
                        <div class="form-group">
                            <label for="car_number">Car Number</label>
                            <input type="text" id="car_number" name="car_number"
                                value="{{ current_user.car_number or '' }}" placeholder="e.g. TN01AB1234">
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn-form-submit">Save Changes</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
{% block extra_scripts %}
<script>
    function toggleCarFields(show) {
        document.getElementById('car-fields').style.display = show ? 'block' : 'none';
    }
</script>
{% endblock %}